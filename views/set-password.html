<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Title</title>
    </head>

    <body>
        <input type="password" placeholder="Password" id="pass1"/>
        <br/>
        <br/>
        <input type="password" placeholder="Confirm Password" id="pass2"/>
        <br/>
        <br/>
        <button onclick="buttonClick()">
            Submit
        </button>
        <br/>
        <br/>
        <input style="width: 100%; height: 50px;" type="text" id="messageText" readonly/>

        <script type="text/javascript">
            var reqService = {
                post: function(url, body){
                    var headers = new Headers({
                        'Content-type':'application/json',
                        'charset': 'utf-a'
                    });

                    var data = {};

                    try{
                        data = JSON.stringify(body);
                    } catch(err) {

                    }

                    var options = {
                        method: 'POST',
                        headers: headers,
                        credentials: 'same-origin',
                        body: data
                    };

                    return fetch(url, options)
                }
            };

            function buttonClick(){
                var pass1 = document.getElementById('pass1').value,
                    pass2 = document.getElementById('pass2').value;

                if(pass1 === pass2){
                    reqService.post('/api/set-password', {password :pass1}).then(function(res){
                    if(res.status === 200){
                        //I just want the message to pop up first before the redirect
                        setTimeout(function(){ window.location='/config' }, 1000);
                    }

                        return res.json();
                    }).then(function(data){
                        var msgEle = document.getElementById('messageText');
                        (msgEle || {}).value = (data || {}).message;
                    });
                } else {
                    var msgEle = document.getElementById('messageText');
                    (msgEle || {}).value = 'Password do not match';
                }
            }
        </script>
    </body>
</html>